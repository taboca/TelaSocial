3G Configuration with Ubuntu 
* We are using HUAWEI 220 modem
* We are using TIM carrier SIM card 
* We are using Ubuntu 11
You can use wvdialconf and pppconf to setup your wvdial.conf in /etc and /etc/ppp configuration. This is how my /etc/wvdial.conf looks like for a connection that has the default settings and also the hsdpa additional settings with Brazilian carrier called TIM: 
[Dialer Defaults]
Auto DNS = 1
Init1 = ATZ
Init2 = ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
Stupid mode = yes
Modem Type = Analog Modem
ISDN = 0
; Username = <Your Login Name>
; Password = <Your Password>
Phone = *99***1#
Modem = /dev/ttyUSB0
Dial Command = ATDT
Baud = 9600
[Dialer hsdpa]
Init2 = AT Q0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
Init3 = AT+CGDCONT=1,"IP","tim.br","",0,0
Password = tim
Username = tim
Baud = 460800
Init1 = ATZ
===
Edit the /etc/ppp/peers/wvdial ( which will be called by wvdial ) and comment the line "/usr/bin/chat -v" 
# This optionfile was generated by pppconfig 2.3.18. 
# 
#
hide-password 
noauth
#connect "/usr/sbin/chat -v -f /etc/chatscripts/wvdial"
debug
/dev/ttyUSB0
115200
defaultroute
noipdefault 
user "tim"
remotename wvdial
ipparam wvdial
usepeerdns
---
Related tools to control usb and mods and modem: 
* ls -la /dev/ttyUS*
* lsmod
* lsusb
* modeswitch
IPTABLES and routes in Ubuntu 
Work in progress
http://www.cyberciti.biz/tips/linux-as-router-for-ppp-pstnisdn-connections.html
Advanced - http://linux-ip.net/html/adv-multi-internet.html

